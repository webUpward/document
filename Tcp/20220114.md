[TOC]

# 笔记

## 协议分层

> 协议分层的优劣：就如同计算机软件中的模块化开发, 即使系统中某 些分层发生变化，也不会波及整个系统。劣势在于过分模块化、使处理变得更加沉重以及每个模块都不得不实现相似的处理逻辑等问题。

> OSI分层：应用层（表示层，会话层）->传输层->网络层->数据链路层->物理层

> 应用层：针对特定应用的协议，包括：电子邮件协议，远程登录协议，文件传输协议

> 表示层：设备固有数据格式和网络标准数据格式的转换，包括：接收不同表现形式的信息，如文字流，图像，声音， 使不同设备对同一比特流解释的结果保持一致

> 会话层：通信管理，负责建立和断开通信连接，包括：何时建立连接，何时断开链接以及保持多久的连接

> 传输层：管理两个姐此案之间的数据传输，确保数据被可靠地传送到目标地址，包括：只在通信双方节点上进行处理，而无需在路由器上处理。

> 网络层：地址管理与路由选择，包括：要负责寻址和路由选择

> 数据链路层：互连设备之间传送和识别数据帧，包括：数据帧与比特流之间的转换

> 物理层：以'0'、'1'代表电压的高低，灯光的闪灭，界定连接器和网线的规格，包括：比特流与电子信号之间的切换

> 网络层与数据链路层都是基于目标地址将数据发送给接收端的，但网络层负责将整个数据发送给最终目标地址，而数据链路层则只负责发送一个分段内的数据

> 网络发送数据，包括：面向连接（Tcp,帧中继，ATM）好比打电话，需要有人拨打和接收，面向无连接（以太网，ip,udp等协议）不要求建立和断开连接，接收端也永远不知自己会在何时从哪里收到数据，所以需要确认是否收到数据

> 网络通信的方式：电路交换和分组交换

- 电路交换：计算机之间的传输速度不变，一台计算机在收发信息时会独占整个电路，其他计算机只能等待这台计算机处理结束以后才有机会使用这条电路收发数据。且无法预测某一台计算机的数据传输从何时开始又在何时结束。如果并发用户数超过交换机之间的通信线路数，就意味着通信无法实现

- 分组交换：计算机与路由器之间以及路由器与路由器只有一条通信线路，让连接到通信电路的计算机将所要发送的数据分成多个数据包，按照一定的顺序排列之后分别发送。且在分组过程中，在每个分组的首部写入了发送端和接收端的地址，所以即使同一条线路同时为多个用户提供服务，也可以明确区分每个分组数据发往的目的地，以及它是与哪台计算机进行的通信，但是由于通信线路的速度有所不同，数据达到目标地址的时间有长有短，且当路由器的缓存饱和或溢出时，甚至可能会导致分组数据丢失、无法发送到对端的情况根据网络拥堵的情况。

## 地址的层次性

- ip地址由网络号和主机号组成，MAC寻址参考的表交地址转发表，ip寻址参考的叫路由控制表，

## 传输速率与吞吐量

- 传输速率高指单位时间内传输的数据量有多少, 单位是bps(Bits Per Second)每秒比特数

## 传输层

- TCP是面向连接的传输层协议，保证两端通信主机之间通信可达，tcp能正确处理传输过程中丢包、传输顺序乱掉等异常情况，还可以有效利用贷款，缓解网络拥堵

- UDP面向无连接的传输层协议，常用语分组数据较少，广播通信，视频通信等多媒体领域

## 文件传输

- 文件传输是指将保存在其他计算机硬盘上的文件转移到本地的硬盘上，或将本地硬盘的文件传送到其他机器硬盘上

## 数据包接收处理

- 主机收到以太网包以后，首先从以太网的包首部找到MAC地址判断是否为发给自己的包。如果不是发给自己的包则丢弃数据，如果接到到了恰好是发给自己的包，就查找以太网首部中的类型域来确定以太网协议所传送的数据类型

- IP模块收到IP包首部及后面的数据部分以后,判断得出包首部中的IP地址与自己的IP地址匹配,然后从接收数据中查找上一层协议，

- TCP模块会计算一下校验和，判断数据是否被损坏，再检查是否在按照序号接收数据，最后检查端口号，确定具体的应用程序。

- 应用程序直接接收发送端发送的数据

## 数据链路层
- 数据链路层的协议定义了通过通信媒介互连的设备之间传输的规范,通信媒介包括双绞线电缆、同轴电缆、光纤、电波以及红外线等介质

## MAC地址

- MAC地址中3～24位（比特位）表示厂商识别码

## IP 协议 

- 主要负责将数据包发送给最终的目标计算机, ip大致分为三大作用模块：IP寻址、路由、IP分包与组包，在发送数据的过程中，ip进行分片处理，IP面向无连接，在发包之前，不需要建立与对端目标地址之间的连接，采用面向无连接的原因是：一、为了简化，二、为了提速。IP地址具有唯一性（唯一性是指在整个网络中，不会跟其他主机的IP地址冲突，IP地址分为四个级别，分别为A类、B类、C类、D类

- IPv4由32位正整数来表示

![M和P结合示意图](../../Public/images/Ciqc1F8X5zuAQrDLAAEpRhFm8n4546.png)
